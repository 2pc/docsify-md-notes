"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const component_1 = require("./component");
const search_1 = require("./search");
async function plugin(hook, vm) {
    const { util } = Docsify;
    const opts = vm.config.search || CONFIG;
    if (Array.isArray(opts)) {
        CONFIG.paths = opts;
    }
    else if (typeof opts === "object") {
        CONFIG.paths = Array.isArray(opts.paths) ? opts.paths : "auto";
        CONFIG.maxAge = util.isPrimitive(opts.maxAge) ? opts.maxAge : CONFIG.maxAge;
        CONFIG.placeholder = opts.placeholder || CONFIG.placeholder;
        CONFIG.noData = opts.noData || CONFIG.noData;
        CONFIG.depth = opts.depth || CONFIG.depth;
        CONFIG.hideOtherSidebarContent = opts.hideOtherSidebarContent || CONFIG.hideOtherSidebarContent;
        CONFIG.namespace = opts.namespace || CONFIG.namespace;
    }
    const isAuto = CONFIG.paths === "auto";
    hook.mounted(() => {
        component_1.init(CONFIG, vm);
        !isAuto && search_1.init(CONFIG, vm);
    });
    hook.doneEach(() => {
        component_1.update(CONFIG, vm);
        isAuto && search_1.init(CONFIG, vm);
    });
}
$docsify.plugins = [plugin].concat($docsify.plugins);
